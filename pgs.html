<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podręcznik Gracza SkyMMO</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: url('https://jbwm.pl/static/media/bg.4d84d2051ef733c96d5f.jpeg') no-repeat center top;
            background-size: cover;
            background-attachment: fixed;
            color: #ffe6cc;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            padding-bottom: 50px;
            -webkit-tap-highlight-color: transparent;
        }

        .main-header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .main-header h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .sticky-container {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #1a1a1a;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .sticky-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .chapters-header {
            padding: 20px 0 10px 0;
            transition: opacity 0.3s ease;
            background: #1a1a1a;
            font-size: 1.8em;
            color: #66fcf1;
        }

        .search-container {
            position: relative;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            background: transparent;
            padding: 0;
            z-index: 1002;
        }

        .content {
            max-width: 800px;
            margin: 10px auto;
            padding: 0 20px;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #cc5500 0%, #803300 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 0;
            width: 100%;
            justify-content: center;
        }

        .nav-button:hover {
            background: linear-gradient(135deg, #803300 0%, #ff6600 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .nav-button i {
            font-size: 1.1em;
        }

        .nav-button.reset {
            left: auto;
            right: 2%;
        }

        /* Dla małych ekranów */
        @media (max-width: 600px) {
            .nav-button {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            /* Dodatkowe style dla przycisku reset na małych ekranach */
            .nav-button.reset {
                top: 2%;
            }
        }

        .accordion {
            background: linear-gradient(to right, #cc5500, #1a1a1a);
            color: white;
            cursor: pointer;
            padding: 20px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .accordion:hover, .accordion.active {
            background: linear-gradient(to right, #803300, #333333);
            transform: translateY(-2px);
        }

        .accordion i {
            margin-right: 15px;
            font-size: 24px;
            color: #ffffff;
            transition: all 0.3s ease;
        }

        .accordion:hover i {
            transform: scale(1.1);
        }

        .panel {
            background: rgba(43, 24, 16, 0.7);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            border-radius: 0 0 8px 8px;
            margin-bottom: 15px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .nested-panel {
            background: rgba(31, 17, 12, 0.7);
            margin: 10px;
            border-radius: 8px;
            padding: 5px;
        }

        .panel p, .panel ul, .panel ol {
            padding: 20px 25px;
        }

        .panel.active {
            max-height: none !important;
        }

        .accordion.active {
            background-color: #444;
            border-left: 2px solid #ff8533;
        }

        .accordion.active + .panel {
            border-left-color: #ff8533;
        }

        .search-box {
            position: relative; /* Dodajemy pozycjonowanie względne */
            background: rgba(204, 85, 0, 0.5); /* Zwiększamy przezroczystość tła */
            border-radius: 25px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            backdrop-filter: blur(5px);
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1001;
        }

        .search-box:focus-within {
            box-shadow: 0 0 0 2px rgba(255, 133, 51, 0.2);
        }

        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 5px;
            font-size: 16px;
            outline: none;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-box button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            font-size: 18px;
            transition: transform 0.2s ease;
        }

        .search-box button:hover {
            transform: scale(1.1);
        }

        #searchResults, #mobileSearchResults {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .search-result-item {
            padding: 10px;
            border-bottom: 1px solid #444;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-result-item:hover {
            background-color: #3a3a3a;
        }

        .search-result-title {
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .search-result-text {
            color: #aaa;
            font-size: 0.9em;
        }

        .match-percentage {
            color: #ff8533;
            font-size: 0.9em;
            font-weight: 500;
            margin-left: 15px;
            opacity: 0.8;
        }

        .category-header {
            font-size: 2em;
            color: #ff8533;
            margin: 40px 0 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ff8533;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        ul, ol {
            margin-left: 25px;
        }

        li {
            margin: 12px 0;
            position: relative;
            padding-left: 5px;
        }

        li::before {
            content: '•';
            color: #ff8533;
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .accordion.nested {
            background: linear-gradient(to right, #1a1a1a, #333333);
            margin: 8px 15px;
            padding: 15px 20px;
        }

        .accordion.nested:hover {
            background: linear-gradient(to right, #333333, #4d4d4d);
        }

        @media (max-width: 600px) {
            .main-header {
                padding: 20px;
            }

            .main-header h1 {
                font-size: 2em;
            }

            .content {
                margin: 20px auto;
            }

            .category-header {
                font-size: 1.5em;
            }

            .accordion {
                padding: 15px;
            }

            .accordion i {
                font-size: 20px;
            }
        }

        /* Style dla menu hamburgerowego */
        .hamburger-menu {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            cursor: pointer;
        }

        .hamburger-menu span {
            display: block;
            width: 25px;
            height: 3px;
            background-color: #fff;
            margin: 5px 0;
            transition: 0.3s;
        }

        .mobile-nav {
            position: fixed;
            top: 0;
            right: -85%;
            width: 85%;
            height: 100vh;
            background: #2a2a2a;
            padding: 60px 15px 20px 15px;
            transition: 0.3s;
            z-index: 1999;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            overflow-y: auto;
        }

        .mobile-nav.active {
            right: 0;
        }

        .mobile-nav ul {
            list-style: none;
            padding: 0;
        }

        .mobile-nav li {
            margin: 20px 0;
        }

        .mobile-nav a {
            color: #fff;
            text-decoration: none;
            font-size: 1.2em;
            transition: 0.3s;
        }

        .mobile-nav a:hover {
            color: #ff8533;  /* Jasny pomarańczowy dla akcentów */
        }

        /* Style dla animacji przy przewijaniu */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .hamburger-menu {
                display: block;
                z-index: 2001;
            }

            .top-wrapper {
                display: flex;
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .buttons-container {
                width: 100%;
                justify-content: space-between;
            }

            .search-container {
                display: none; /* Ukryj oryginalny pasek wyszukiwania */
            }

            .title-container {
                width: 100%;
                order: 1;
            }

            .search-box {
                width: 100%;
                background: rgba(255, 255, 255, 0.1);
                padding: 8px 12px;
            }

            .search-box input {
                width: 100%;
                font-size: 16px; /* Zapobiega powiększaniu na iOS */
                padding: 6px;
            }

            #searchResults {
                position: fixed;
                top: 120px;
                left: 0;
                width: 100%;
                max-height: calc(100vh - 120px);
                margin: 0;
                z-index: 2000;
                background: rgba(51, 51, 51, 0.95);
            }

            .main-content {
                margin-top: 80px; /* Zmniejsz margines, bo pasek wyszukiwania jest teraz w menu */
            }

            .top-container {
                height: auto;
                min-height: 60px; /* Zmniejsz wysokość górnego paska */
            }

            .nav-logo {
                height: 40px;
            }

            .title-container h1 {
                font-size: 1.2em;
                white-space: normal; /* Pozwala na zawijanie tekstu */
                padding: 0 5px;
            }
        }

        /* Dodatkowe style dla bardzo małych ekranów */
        @media (max-width: 480px) {
            .main-content {
                margin-top: 160px;
            }

            .search-box input {
                font-size: 14px;
            }

            .search-box {
                padding: 6px 10px;
            }
        }

        .top-container {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            height: auto;
        }

        .top-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 20px;
            align-items: center;
        }

        .buttons-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            position: relative;
            padding: 5px 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .nav-link:hover {
            transform: scale(1.1);
        }

        .nav-link.reset {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .nav-link.reset:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .mobile-nav-buttons {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mobile-nav-link {
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }

        .mobile-nav-link:hover {
            transform: scale(1.1);
        }

        .mobile-nav-link.reset {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .mobile-nav-link.reset:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .title-container {
            text-align: center;
            transition: opacity 0.3s ease;
        }

        .title-container h1 {
            font-size: 2em;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .main-content {
            max-width: 800px;
            margin: 120px auto 0;
            padding: 20px;
        }

        .nav-logo {
            height: 70px;
            width: auto;
            cursor: pointer;
            transition: transform .2s ease;
        }

        .mobile-search-container {
            display: none;
            width: 100%;
            padding: 10px 15px;
            position: fixed;
            top: 70px;
            left: 0;
            background: rgba(0, 0, 0, 0.9); /* Ciemniejsze tło */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1998;
            border-bottom: 1px solid rgba(255, 133, 51, 0.1);
        }
    </style>
</head>
<body>
    <!-- Usuwamy menu hamburgerowe i wyszukiwanie mobilne -->
    <!-- <div class="hamburger-menu">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div class="mobile-search-container">
        <input type="text" id="mobileSearchInput" placeholder="Wyszukaj...">
        <div id="mobileSearchResults"></div>
    </div>
    <nav class="mobile-nav">
        <div class="mobile-nav-buttons">
            <a href="https://jbwm.pl" class="mobile-nav-link">
                <i class="fas fa-home"></i>
            </a>
            <a href="#" class="mobile-nav-link reset">RESET</a>
        </div>
    </nav> -->

    <div class="top-container">
        <div class="top-wrapper">
            <div class="buttons-container">
                <a href="https://jbwm.pl" class="nav-link">
                    <img src="logo.639430541c9608227897.webp" alt="JBWM Logo" class="nav-logo">
                </a>
                <a href="#" class="nav-link reset">RESET</a>
            </div>
            <div class="title-container">
                <h1><i class="fas fa-book"></i> Podręcznik Gracza SkyMMO</h1>
            </div>
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Wyszukaj...">
                    <div id="searchResults"></div>
                </div>
            </div>
        </div>
    </div>

    <main class="main-content">
        <h2 class="category-header">Spawn</h2>
        <h4>Rodzaje spawnów</h4>
        <ul>
            <li><h4>Zwykły spawn</h4><p> - gracz jest teleportowany od samego początku rozgrywki</p></li>
            <li><h4>Spawn OW5</h4><p> - gracz jest teleportowany od momentu odblokowania OW5, może wrócić na zwykłego spawna poprzez specjalny teleport</p></li>
        </ul>
        <p>Ważne NPC z zwykłego spawna są na spawnie OW5, ale dodatkowo np. jest tam NPC ??? od sakiewek oraz NPC ??? od wymiany szarf na pył szarf 1/2</p>
        <!--1gildie-->
        <button class="accordion"><i class=""></i>Gildie</button>
            <div class="panel">
                <h4>Zakładanie gildii</h4>
                <p>Aby założyć gildię należy pogadać z NPC GuildMaster. Każda gildia posiada swój własny teren gildii - statek na tyłach spawnu. Startowa liczba członków gildii to 5 (max 15). Wymagane jest 10 kamieni gildii w EQ.</p>
                
                <h4>Wyposażenie statku gildyjnego</h4>
                <p>Na statku gildyjnym znajdują się:</p>
                <ul>
                    <li>Stół Misji - do wyznaczania i akceptowania misji - dostępne od początku</li>
                    <li>NPC Magazynier - do oddawania przedmiotów do misji - dostępne od początku</li>
                    <li>NPC Zarządca - do zarządzania gildią - dostępne od początku</li>
                    <li>SkillTree - do wydawania punktów za levelowanie - dostępne od początku</li>
                    <li>Sklep za punkty - do kupowania bonusów - dostępne od 5k punktów gildii</li>
                    <li>NPC Chenshan - NPC od szarf - dostępne od 100 punktów gildii</li>
                    <li>NPC Kuzi - NPC od szarf - dostępne od 300 punktów gildii</li>
                </ul>

                <h4>System SkillTree</h4>
                <p>W SkillTree znajdują się 3 osobne drzewka gildyjne:</p>
                <ul>
                    <li>Serce Mnożników - Bonus drop, Stellium, Bonus exp klasy</li>
                    <li>Serce Gildii - Poziom trudności Questów, Liczba członków, Bonusowe punkty</li>
                    <li>Serce Bonusów - Bonusy do DMG'a, HP, DEF'a</li>
                </ul>
                <!--1szarfy-->
                <button class="accordion nested"><i class=""></i>Szarfy</button>
                    <div class="panel nested-panel">
                        <h4>Pozyskiwanie i sposób działania</h4>
                        <ul>
                            <li>Szarfy posiadają % Wartości.</li>
                            <li>Szarfy można wytworzyć u NPC Stwórca za Delikatne Sukna, które pozyskuje się z dowolnego dungeona. Im większa trudność dungeona (zwykły -> elitarny -> koszmarny) tym większy drop Sukien.</li>
                            <li>Szarfy można łączyć u NPC Chenshan (znajduje się on na Statku Gildyjnym na spawnie i wymaga 100 punktów misji gildii do odblokowania), aby uzyskać większy % wartości. Łączy się górną szarfę z dolną. Szarfa ma % szans na ulepszenie swojej % wartości o 1%, szansę na ulepszenie % wartości o 2% oraz szansę na spadnięcie % wartości o 1%, która wynosi 10%, jeśli nic z tego się nie wydarzy wtedy górna szarfa zostaje taka jaka była, a dolna przepada.</li>
                            <li>Maksymalny poziom % wartości na szarfie wynosi 20%.</li>
                            <li>Żółty i Niebieski slot są przeznaczone dla Kamieni Ochrony i Wzmocnienia, które są do kupienia pod komendą /itemshop -> itemshop.</li>
                            <li>Kamień Wzmocnienia zwiększa szansę na powodzenie przy łączeniu, a Kamien Ochrony chroni przed spadnięciem szarfy o 1% wartości w dół przy nieudanym połączeniu.</li>
                        </ul>
                        <h4>Kamienie Mocy</h4>
                        <ul>
                            <li>Kamienie mocy można scraftować u NPC Jubiler na Mapie Górniczej za Dusze Map, które są do scraftowania u NPC Bibliotekarz w Karczmie na /spawn.</li>
                            <li>Możliwy/e atrybut/y można zobaczyć klikając prawym przyciskiem w GUI Jubilera na dany Kamień Mocy. Aby uzyskać atrybuty na Kamieniu należy użyć na nim Zaczarowania Przedmiotu w Stole Zaklęć.</li>
                            <li>Kamień Mocy łączy się z szarfą u NPC Kuzi (znajduje się on na Statku Gildyjnym na spawnie i wymaga 300 punktów misji gildii do odblokowania). Atrybut na kamieniu jest mnożony przez % wartości i taki bonus daje po założeniu w specjalnym slotu znajdującym się w plecaku (/plecak 1). Dla przykładu jeśli posiada się na Kamieniu Mocy obrażenia +80, a na szarfie % wartości wynosi 10% końcowo szarfa będzie dawała obrażenia +8.</li>
                        </ul>
                        <h4>Skiny Szarf</h4>
                        <ul>
                            <li>Skiny szarf są do kupienia pod komendą /itemshop -> Itemshop.</li>
                            <li>Posiadając skina w łapce należy kliknąć a wówczas doda się on do GUI pod komendą /skinyszarf, gdzie można wybrać skina spośród tych, które już się odblokowało.</li>
                            <li>Szarfę można ukryć pod komendą /ukryjszarfe.</li>
                            <li>U NPC ??? na spawnie OW5 można wymienić skina do szarfy na pył szarfy, które później można spowrotem wymienić na szkatułkę z szafarmi.</li>
                        </ul>
                    </div>
            </div>
        <!--1tablica zadan-->
        <button class="accordion"><i class=""></i>Tablica Zadań</button>
            <div class="panel">
                <h4>Lokalizacja</h4>
                <p>Znajduję się ona zarówno na Spawnie, jak i na początku Ow1.</p>
                <h4>Kategorie Questów</h4>
                <ul>
                    <li>Misje Dzienne - resetują się codziennie o 00:00.</li>
                    <li>Misje Tygodniowe - resetują się o 00:00 z niedzieli na poniedziałek</li>
                    <li>Misje Miesięczne - resetują się pierwszego dnia każdego miesiąca o 02:00</li>
                </ul>
                <h4>Działanie tablicy zadań</h4>
                <p>W tablicy można wyróżnić 2 zmienne:</p>
                <ul>
                    <li>Ilość wykonanych misji - Pozwala odblokować dodatkowe misje, ilość wymaganych wykonanych misji na odblokowanie kolejnego slota na Questa można znaleźć po najechaniu na butelkę z expem w GUI Misji Dziennych, Tygodniowych lub Miesięcznych.</li>
                    <li>Poziom trudności - Określa to jak trudne są misje na podstawie poziomu klasy, progi do kolejnego poziomu trudności można zobaczyć po najechaniu na butelkę expa od razu po otworzeniu Gui Tablicy Zadań.</li>
                </ul>
                <ul>
                    <li>Misja Dzienna liczy się jak 1 wykonana misja.</li>
                    <li>Misja Tygodniowa liczy się jako 2 wykonane misje.</li>
                    <li>Misja Miesięczna liczy się jako 5 wykonanych misjii.</li>
                </ul>
                <p>Jeśli pisze np. aby wykonać 5 dungenów lodowych po zadaniu 1% ostatniemu bossowi zaliczają się wszystkie poziomy trudności (zwykły, elitarny, koszmarny) natomiast jeśli pisze np. aby wykonać 5 dungeonów koszmarnych lodowych należy ZADAĆ 5% ostatniemu bossowi x razy</p>
            </div>
        <!--1pety-->
        <button class="accordion"><i class=""></i>Pety</button>
            <div class="panel">
                <h4>Level Peta</h4>
                <p>Zwierzak bez ewolucji może maxymalnie osiągnąć 20 level, po pierwszej ewolucji 50, a po drugiej - 100.</p>
                <h4>Sposoby levelowania peta</h4>
                <ul>
                    <li>Zielarstwo - zbieranie kwiatków</li>
                    <li>Zabijanie mobów</li>
                    <li>Łowienie - tylko w przypadku Rozdymki</li>
                    <li>Kopanie rud w kopalni</li>
                    <li>Karma dla peta 10/25/50/100/400/1000</li>
                </ul>
                <h4>Zostawianie peta podczas zmiany podservera</h4>
                <p>Żeby nie musieć przywoływać swojego peta przy każdej zmianie podservera należy mieć rangę MVIP+ lub TYTAN+. Aby odwołać peta należy kliknąć na niego w GUI pod komendą /pet</p>
                <h4>Spis zwierzaków</h4>
                <ul>
                    <li>Burzyciel
                        <ul>
                            <li>Do zdobycia z Burzyciela - Bossa na OW1</li>
                            <li>+% Zdrowie</li>
                            <li>+% Obrona</li>
                        </ul>
                    </li>
                    <li>BMinotaur
                        <ul>
                            <li>Do zdobycia z szkatułki Labiryntu na dungeonie OW1</li>
                            <li>+% Obrażenia</li>
                            <li>Posiada 2 ewolucje</li>
                        </ul>
                    </li>
                    <li>Rozdymka
                        <ul>
                            <li>Do zdobycia z Skrzyni Eventowej Rybackiej</li>
                            <li>+% Bonus EXP do wędkarstwa</li>
                            <li>+ Szybkość łowienia</li>
                            <li>Posiada 2 ewolucje</li>
                        </ul>
                    </li>
                    <li>Samuraj
                        <ul>
                            <li>Do zdobycia z szkatułki Lodowej na dungeonie</li>
                            <li>+% Bonus EXP do walki</li>
                            <li>+% Bonus drop</li>
                            <li>Posiada 2 ewolucje</li>
                        </ul>
                    </li>
                    <li>Grzib
                        <ul>
                            <li>Do zdobycia z Grzybowej Księżniczki - Bossa na OW4_2</li>
                            <li>+% Bonus EXP do drwalnictwa</li>
                            <li>+ Fortuna drwala</li>
                            <li>Posiada 1 ewolucje</li>
                        </ul>
                    </li>
                    <li>Reaper
                        <ul>
                            <li>Do zdobycia z szkatułki Umarłego Rozpruwacza na dungeonie DT</li>
                            <li>+ Obrażenia</li>
                            <li>+% Szansa na obrażenia krytyczne</li>
                            <li>Posiada 2 ewolucje</li>
                        </ul>
                    </li>
                    <li>Góral
                        <ul>
                            <li>Do zdobycia z szkatułki Podziemnej Eskapady na dungeonie Eskapada</li>
                            <li>+% Bonus EXP do górnictwa</li>
                            <li>+ Fortuna górnika</li>
                            <li>Posiada 1 ewolucje</li>
                        </ul>
                    </li>
                    <li>Smykogryf
                        <ul>
                            <li>Do zdobyciau NPC Zoolog w jego sezonowym sklepie</li>
                            <li>+ Obrażenia</li>
                            <li>+% Szansa na obrażenia krytyczne umiejętności</li>
                            <li>Posiada 1 ewolucje</li>
                        </ul>
                    </li>
                    <li>Benek
                        <ul>
                            <li>Do zdobyciau NPC Zoolog w jego sezonowym sklepie</li>
                            <li>+% Szansa za zebranie kwiata</li>
                            <li>+ Fortuna Zielaka</li>
                        </ul>
                    </li>
                    <li>Fred
                        <ul>
                            <li>Do zdobyciau NPC Zoolog w jego sezonowym sklepie</li>
                            <li>+% Bonus EXP do rolnictwa</li>
                            <li>+ Fortuna rolnika</li>
                        </ul>
                    </li>
                </ul>
                <h4>Skąd zdobyć kamienie ewolucji</h4>
                <ul>Zwierzaki można ewoluować u NPC Stwórca na /spawn za różne itemki oraz kamień ewolucji:
                    <li>Kamień Ewolucjii I do Minotaura - Dungeon Pustynny - Szkatułka Pustynna</li>
                    <li>Kamień Ewolucjii II do Minotaura - Elit. Dungeon Labirynt - drop z Bossa</li>
                    <li>Kamień Ewolucjii I do Rozdymki - Event Rybacki - Szkatułka Rybacka</li>
                    <li>Kamień Ewolucjii II do Rozdymki - Sezonowy Sklep Rybacki</li>
                    <li>Kamień Ewolucjii I do Samuraja - Elit. Dungeon Lodowy - drop z Bossa</li>
                    <li>Demoniczna Pieczęć do Reapera - Dungeon DT - Szkatułka Niebieskiej Śmierci</li>
                    <li>Kamień Ewolucjii I do Gorala - Dungeon Eskapada - Piekielna Szkatułka</li>
                    <li>Fragment Zwierzaka I do Burela - Koszmarny Dungeon Labirynt - Koszmarna Szkatułka I</li>
                    <li>Fragment Zwierzaka II do Smykogryfa - Koszmarny Dungeon Pustynny - Koszmarna Szkatułka II</li>
                </ul>
            </div>
        <!--1stworca-->
        <button class="accordion"><i class=""></i>Stwórca</button>
            <div class="panel">
                <h4>Stwórca daje możliwość scraftowania wielu przedmiotów takich jak:</h4>
                <ul>
                    <li>Fabryki</li>
                    <li>Przedmioty rolnicze, górnicze i do alchemii</li>
                    <li>Szarfy</li>
                    <li>Książki Farmerskie</li>
                    <li>Ewolucje Petów</li>
                    <li>Zaczarowany stół</li>
                </ul>
                <h4>Skrócenia czasu oczekiwania</h4>
                <p>W Itemshopie można kupić Skrócenie czasu craftingu, które po użyciu zmniejsza nam czas czekania na dany item robiony i Stwórcy.</p>
                <h4>Sloty</h4>
                <p>W celu odblokowania większej ilości slotów na itemki u Stwórcy należy kupić rangę.</p>
            </div>
        <!--1kule czasu-->
        <button class="accordion"><i class=""></i>Kula Czasu</button>
            <div class="panel">
                <h4>Przykładowe Źródła:</h4>
                <ul>
                    <li>Dzienna nagroda u NPC Barman na /spawn</li>
                    <li>Side Quest u NPC Szpieg Cor-Win</li>
                    <li>Strefa AFK</li>
                </ul>
                <h4>Przykłady użycia:</h4>
                <ul>
                    <li>Różne Itemy u NPC Embry</li>
                </ul>
            </div>
        <!--1ow/dung-->
        <h2 class="category-header">OpenWorld i Dungeony</h2>
            <p>???</p>
            <!--1dung-->
            <button class="accordion"><i class=""></i>Dungeony</button>
                <div class="panel">
                    <p>???</p>
                
                <!--1dungeon master-->
                <button class="accordion nested"><i class=""></i>NPC Dungeon Master</button>
                    <div class="panel nested-panel">
                        <h4>Pozwala na wymianę</h4>
                        <ul>
                            <li>Cząstek Przepustek na Przepustki</li>
                            <li>Fragmentów Przepustek na Przepustki</li>
                            <li>Cząstek Przepustek na Fragmenty Przepustek</li>
                            <li>Przepustek na Cząstki Przepustek</li>
                        </ul>
                        <p>Dodatkowo można u niego zakupić klucze do Kuferka Dungeon PREMIUM za 100k $ i Klucz do kuferka Dungeon I/II/III // Klucz do Szkat. Pozdziemnej Eskapady</p>
                        <p>Można u niego scraftować Sakiewki na cząstki przepustek/delikatne sukna</p>
                        <h4>Cząstki i przepustki można zdobyć</h4>
                        <ul>
                            <li>z niektórych bossów, minibossów oraz metinów (drop można zobaczyć pod komendą /bestiary)</li>
                            <li>z niektórych znajdziek na dungeonach</li>
                            <li>z bossów końcowych na dungeonach</li>
                            <li>z worldbossów</li>
                        </ul>
                    </div>
                <!--1trofea-->
                <button class="accordion nested"><i class=""></i>Trofea</button>
                    <div class="panel nested-panel">
                        <h4>Pozyskiwanie</h4>
                        <p>Trofea to rzadkie przedmioty z dungeonów, które pozyskuje się z bossa, po wydropieniu na czacie pojawia się komunikat z informacją kto i co dropnął.</p>
                        <p>Im większa trudność dunga tym większa szansa na drop (Zwykły -> Elitarny -> Koszmarny).</p>
                        <h4>Bonusy z trofeów</h4>
                        <p>U NPC Janek można oddać trofeum, aby pozyskać permanentny bonus.</p>
                        <h4>Lista Trofeów</h4>
                        <ul>
                            <li>Róg Minotaura - Minotaur</li>
                            <li>Wyrwane Ślepie Pradawnego - Pradawny</li>
                            <li>Berło Króla Północy - Król Północy</li>
                            <li>Klepsydra z Piaskiem Życia - Umarły Rozpruwacz</li>
                            <li>Niebieska Kosa 3000 - Niebieska Śmierć</li>
                            <li>Fałszywy Flogiston - Piekielny Książe/Piekielny Lord</li>
                        </ul>
                    </div>
                <!--1rodzaje dungow-->
                <button class="accordion nested"><i class=""></i>Rodzaje Dungeonów</button>
                    <div class="panel nested-panel">
                        <p>???</p>
                    <!--1kraina rozkoszy-->
                    <button class="accordion nested"><i class=""></i>Kraina Rozkoszy</button>
                        <div class="panel nested-panel">
                            <h4>Wykwintna Truskawka</h4>
                            <p>Wykwintna Truskawka służy do włączenia respienia się mobów na dungeonie, aby ją zdobyć należy ją kupić u NPC Odrzutufka w Karczmie poprzez wybieranie odpowiednich opcji dialogowych.</p>
                            <p>Koszt Wykwintnej Truskawki to Poziom Gracza * 100$.</p>
                            <h4>Lokalizacja i rozpoczęcie</h4>
                            <p>Dungeon znajduje się na Lobby DT, aby tam się dostać należy udać się do NPC Rakshasi w Karczmie. NPC Odrzutufka (ta sama nazwa NPC, ale inna lokalizacja i przeznaczenie) po kliknięciu i wybraniu odpowiedniej opcji dialogowej przeniesie nas na sam Dungeon, aby tam wejść nie trzeba być w party, ponieważ jest to dungeon SOLO.</p>
                            <h4>Przebieg</h4>
                            <p>Aby moby zaczęły się respić należy użyć wcześniej kupionej Wykwintnej Truskawki. Wszystkie moby dają x reputacji.</p>
                            <p>Pierwszym mobem są Króliki, po zabiciu kilku pojawi się kamień Metin, po kliknięciu w niego lewym przyciskiem myszy zostaniemy przeniesieni na drugą część dungeona, gdzie zabija się Rozkosznych Obywateli i Owce, po zabiciu x mobów pojawia się Rozkoszna Zebra, czyli Boss, który daje sporo reputacji po zabiciu. </p>
                            <p>Dungeon Trwa MAX 5 minut.</p>
                        </div>
                    <!--1dg1-->
                    <button class="accordion nested"><i class=""></i>Labirynt</button>
                        <div class="panel nested-panel">
                            <p>???</p>
                        </div>
                    <!--1dg2-->
                    <button class="accordion nested"><i class=""></i>Pustynny</button>
                        <div class="panel nested-panel">
                            <p>???</p>
                        </div>
                    <!--1dg3-->
                    <button class="accordion nested"><i class=""></i>Lodowy</button>
                        <div class="panel nested-panel">
                            <p>???</p>
                        </div>
                    <!--1dt-->
                    <button class="accordion nested"><i class=""></i>Demon Tower</button>
                        <div class="panel nested-panel">
                            <p>???</p>
                        </div>
                    <!--1eski-->
                    <button class="accordion nested"><i class=""></i>Podziemna Eskapada</button>
                        <div class="panel nested-panel">
                            <p>???</p>
                        </div>
                </div>
            </div>
            <!--1ow-->
            <button class="accordion"><i class=""></i>OpenWorld</button>
            <div class="panel">
                <p>???</p>
                <!--1ow5-->
                <button class="accordion nested"><i class=""></i>OW5</button>
                    <div class="panel nested-panel">
                        <p>???</p>  
                    </div>
                <!--1profesje-->
                <button class="accordion nested"><i class=""></i>Profesje</button>
                    <div class="panel nested-panel">

                        <!--1zielarstwo-->
                        <button class="accordion nested"><i class=""></i>Zielarstwo</button>
                            <div class="panel nested-panel">
                                <p>Zielarstwo to profesja, którą leveluje sie na OpenWorldzie, polega na zbieraniu kwiatków przy użyciu sierpa:</p>
                                <ul>
                                    <li>Ow1 - Kwiat Tomai - Sierp Lv.1+</li>
                                    <li>Ow2 - Kwiat Rozani - Sierp Lv.1+</li>
                                    <li>Ow3 - Kwiat Północy - Sierp Lv.1+</li>
                                    <li>Ow4_1 - Kwiat Bielika Pospolitego - Sierp Lv.4+</li>
                                    <li>Ow4_2 - Grzyb Niebios - Sierp Lv.4+</li>
                                    <li>Ow4_4 - Kwiat Fioleti - Sierp Lv.6+</li>
                                    <li>Ow5_1 - Bagienne Ziele - Sierl Lv.7+</li>
                                </ul>
                                <h4>Pozyskiwanie</h4>
                                <p>Zielarstwo leveluje się zbierając kwiatki na OpenWorldzie 1, 2, 3, 4_1, 4_2, 4_4, 5_1. Im lepsze ow tym więcej expa za zebranie kwiata. Sierp, który można ulepszać zdobywa się od Efliej Alchemiczki po osiągnięciu 50 level klasy lub kupując go od Wyzyskiwacza na /spawn.</p>
                                <p>Kwiaty znajdują się w określonych miejscach na wyżej wymienionych mapach, mają losowy czas respawnu.</p>
                                <p>Za większą szansę na zebranie kwiatka/pozyskania jego większej ilości odpowiadają takie statystyki jak</p>
                                <ul>
                                    <li>Zwiększona szansa za zebranie rośliny</li>
                                    <li>Fortuna zielarza</li>
                                </ul>
                                <h4>Sierpy</h4>
                                <p>Poz.1 od 0 poziomu zielarstwa (pozyskiwany od NPC Elfia Alchemiczka za darmo po osiągnięciu 50 lvla klasy lub od Wyzyskiwacza za $).</p>
                                <p>Sierp można ulepszać u NPC Elfia Zielarka, która znajduje sie na Ow1.</p>
                                <h4>Zbroje i wyposażenie zielarskie</h4>
                                <p>Do kupienia i ulepszenia w NPC Elfia Zielarka z wyjątkiem naszyjniku i amuletu. Naszyjnik zdobywa się z Side Questa u NPC Cor-Win na zwykłym spawnie lub u NPC Wyzyskiwacz również na zwykłym spawnie. Amulet zdobywa się kończąc drugą misję u NPC Elfia Alchemiczka lub u NPC Wyzyskiwacz na zwykłym spawnie</p>
                                <h4>Zastosowanie</h4>
                                <ul>
                                    <li>Wytwarzanie potek w alchemii</li>
                                    <li>Do niektórych wyposażeń na OpenWorldzie</li>
                                    <li>Do side questa u NPC Elfia Alchemiczka</li>
                                </ul>
                                <h4>Ilość kwiatów na OW</h4>
                                <ul>
                                    <li>Ow1 - 20</li>
                                    <li>Ow2 - 20</li>
                                    <li>Ow3 - 20</li>
                                    <li>Ow4_1 - 18</li>
                                    <li>Ow4_2 - 18</li>
                                    <li>Ow4_4 - 16</li>
                                    <li>Ow5 - ???</li>
                                </ul>
                                
                            </div>
                        <!--1lowca-->
                        <button class="accordion nested"><i class=""></i>Łowca</button>
                            <div class="panel nested-panel">
                                <h4>Pozyskiwanie</h4>
                                <p>Łowcę zdobywa się zabijając Bossy, Minibossy, WorldBossy oraz Metiny na OpenWorldzie.</p>
                                <p>1 poziom Łowcy to 1% statystyki Dodatkowy Drop - te procenty mnożą się przez resztę.</p>
                                <p>Maksymalny poziom łowcy wynosi 100.</p>
                            </div>
                        <!--1eksploracja-->
                        <button class="accordion nested"><i class=""></i>Eksploracja</button>
                            <div class="panel nested-panel">
                                <h4>Pozyskiwanie</h4>
                                <p>Eksploracje zdobywa się z Questów, zarówno tych fabularnych jak i side Questów, czy daily Questów.</p>
                                <p>Questy fabularne to zadania, które wykonuje się w celu przechodzenia fabuły danej mapy/regionu</p>
                                <p>Side questy to zadania pobocznie, które nie są wymagane do ukończenia fabuły</p>
                                <p>Przydatną komendą jest /dziennik gdzie można zobaczyć swoje aktualne misje zarówno fabularne jak i poboczne na danej mapie</p>
                            </div>
                        <!--1wedkarstwo-->    
                        <button class="accordion nested"><i class=""></i>Wędkarstwo</button>
                            <div class="panel nested-panel">
                                <h4>Pozyskiwanie</h4>
                                <p>Pierwszą wędkę odbiera się u NPC Waldek na /spawn</p>
                                <p>Drop z poszczególnych łowisk można znaleść u lokalnego rybaka na każdym łowisku</p>
                                <p>Miejsca, w których można łowić to</p>
                                <ul>
                                    <li>Łowisko na Ow1, które znajduje się za Boską Ręką</li>
                                    <li>Łowisko na Ow2, które znajduje się bliski teleportu Dusznica</li>
                                    <li>Łowisko na Ow3, które znajduje się w Lodowej Grocie</li>
                                    <li>Łowisko na Ow4_2, które znajduje się na drugiej części Grzybowej Krainy</li>
                                    <li>łowisko na Ow4_5</li>
                                    <li>łowisko na dungeonie koszmarny lodowy</li>
                                </ul>
                                <h4>Jak łowić</h4>
                                <p>W celu łowienia należy zarzucić wędkę do wody posiadając jednocześnie odpowiednią na miejsce, w którym się łowi przynętę. Po tym jak ryba złapie za spławik należy nacisnąć literkę, która wyskoczyła na ekranie. Jeśli wszystko przebiegło pomyślnie powinno dostać się expa i drop.</p>
                                <p>WĘDKA MUSI BYĆ NA PIERWSZYM SLOCIE</p>
                                <h4>Żyłka</h4>
                                <p>Podczas wyławiania ryby lub jeśli minie czas na jej wyłowienie żyłka wędki może pęknąć lub zostać naderwana - w tym drugim przypadku wystarczy zarzucić ponownie wędkę, a w pierwszym trzeba nałożyć nową żyłkę klikając żyłką na wędkę w ekwipunku. Żyłkę można kupić u NPC Handlarz Drobiazgami, który znajduje się na ow1 lub u NPC na łowisku Ow3.</p>
                                <h4>Przynęta</h4>
                                <p>Każda przynęta posiada swoją pulę dropów. Są do kupienia u Rybaków na łowiskach.</p>
                                <h4>Gorzyce</h4>
                                <p>Gorzyce to łowisko eventowe, które otwiera się tylko podczas eventu na drop szkatułek rybackich. Na łowisko można się dostać przez NPC'ta Rybaka na /spawn. Można tam wyłowić Kamień Wędkarski przydany np</p>
                                <ul>
                                    <li>Podczas Sklepu Eventowego, gdzie za przedmioty z łowienia można kupić inne przedmioty</li>
                                    <li>Do scraftowania artefaktu siły (na Gorzycach)</li>
                                </ul>
                                <h4>Potwory morskie</h4>
                                <p>Potwory morskie mogą zostać wyłowione, po zabiciu dropią różne przedmioty w zależności od potwora. Możliwe do wyłowienia od Ow3.</p>
                                <h4>Zanęta</h4>
                                <p>Zanęta po rzuceniu do wody tworzy w danym obrębie bąbelki, podczas łowienia w nich zwiększa się szybkość łowienia. (jeśli nie widzisz bąbelków to wina ustawień nie serwera)</p>
                                <h4>Koszt wstępu na łowisko</h4>
                                <ul>
                                    <li>Na jakim ow znajduje się łowisko - ile się płaci za jaki czas na łowisku - nazwa NPC, u którego kupuje się przepustkę</li>
                                    <li>Ow3 - 40k/6h - Mors</li>
                                    <li>Ow4_2 - 150k/6h - Grzybowy Strażnik</li>
                                    <li>Ow4_5 - 500k/6h - Strażnik Łowiska</li>
                                    <li>Kupując Kartę Vip 3d/1d w /itemshop dostaje się przepustkę na wszystkie łowiska na czas trwania Karty Vip</li>
                                    <li>Kupując Kartę rybacką 7d dostaje się przepustkę na wszystkie łowiska na czas trwania Karty Rybackiej oraz 60% szans na to, że ryba nie zje przynęty
                                    </li>
                                </ul>
                                <h4>Wyposażenie</h4>
                                <p>Wyposażenie i akcesoria wędkarskie (bransoleta, amulet, wędka) zdobywa się (z wyłączeniem wędki) i ulepsza na łowiskach</p>
                            </div>
                    </div>
                <!--1npc-->
                <button class="accordion nested"><i class=""></i>NPC</button>
                    <div class="panel nested-panel">
                        <!--1biolog-->
                        <button class="accordion nested"><i class=""></i>Biolog</button>
                            <div class="panel nested-panel">
                                <h4>Sposób działania</h4>
                                <p>Biolog wymaga od nas oddania mu danej ilości przedmiotów takich jak:</p>
                                <ul>
                                    <li>Ząb dzika - wymagany 0 poziom klasy - Ow1 - 10 sztuk z 0.5h cooldownu</li>
                                    <li>Skorupa Skarabeusza - wymagany 15 poziom klasy - Ow2 - 15 sztuk z 1h cooldownu</li>
                                    <li>Wilcza Łapa - wymagany 35 poziom klasy - Ow3 - 20 sztuk z 2h cooldownu</li>
                                    <li>Antyczna Cięciwa - wymagany 75 poziom klasy - Ow4_1 - 25 sztuk z 3h cooldownu</li>
                                    <li>Grzybowy Kapelusz - wymagany 90 poziom klasy - Ow4_2 - 30 sztuk z 4h cooldownu</li>
                                    <li>Siarkowe Serce - wymagany 105 poziom klasy - Ow4_3 - 35 sztuk z 5h cooldownu</li>
                                    <li>Zerwane Okowy - wymagany 120 poziom klasy - Ow4_4 - 41 sztuk z 6h cooldownu</li>
                                    <li>Piekielny Klejnot - wymagany 150 poziom klasy - Ow4_5 - 46 sztuk z 6h cooldownu</li>
                                    <li>Żądło Ważki - wymagany ??? poziom klasy - Ow5_1 - ??? sztuk z ??? cooldownu</li>
                                </ul>
                                <p>Z każdym kolejnym itemkiem do biologa zwiększa się trudność jego zdobycia, jak i też ilość wymaganych itemków do oddania oraz czas pomiędzy oddaniem przedmiotu - ten można pominąć Eliksirem Poszukiwacza, który można kupić w /itemshop.</p>
                                <p>Biolog za oddanie wszystkich itemków danego typu daje stałe bonusy do naszej postaci.</p>
                            </div>
                        <!--1kolekcjoner-->
                        <button class="accordion nested"><i class=""></i>Kolekcjoner</button>
                            <div class="panel nested-panel">
                                <h4>Kolekcjoner to</h4>
                                <p>Side Quest, w którym trzeba zabić x mobów na danej mapie, aby uzyskać nagrodę.</p>
                                <p>Od Ow1 do Ow4_3 trzeba zabić następującą ilość mobów</p>
                                <ul>
                                    <li>2222 Zwykłych mobów</li>
                                    <li>222/444 Bossów/Minibossów (22 na Ow1)</li>
                                    <li>444 Metinów</li>
                                </ul>
                                <p>Od Ow4_4 wymagana ilość mobów do zabicia zwiększa się.</p>
                                <h4>Nagroda</h4>
                                <ul>
                                    <li>Tysiąc/kilka tysięcy expa postaci/eksploracji</li>
                                    <li>Kule czasu i inne itemy w zależności od mapy</li>
                                    <li>Unikalny item, zazwyczaj taki który znajduje się w /itemshop</li>
                                </ul>
                            </div>
                    </div>
                    <!--1worldbossy-->
                    <button class="accordion nested"><i class=""></i>WorldBossy</button>
                        <div class="panel nested-panel">
                            <h4>Czas repsawnu</h4>
                            <p>Na serverze są 4 Worldbossy, każdy Worldboss ma swój określony czas repsawnu, który wyświetla się nad jego respem.</p>
                            <p>Worldbossom można zadać max 1% ich HP na jednego hita</p>
                            <h4>Wpieniony Handlarz</h4>
                            <p>Ma 45k HP. Pojawia się na Ow1 w Chorej Wiosce. Jego dokładny respawn można zobaczyć na Dynmapie. Jego drop to:</p>
                            <ul>
                                <li>itemki Ow1</li>
                                <li>Owocki Życia 10/25</li>
                                <li>Przepustka na Dungeon Labirynt</li>
                                <li>Talizman Handlarza PvE/PvP - te mają bardzo niską szansę na drop, dają HP, %HP oraz Odporność na graczy/potwory</li>
                            </ul>
                            <h4>Mumia</h4>
                            <p>Ma 155k HP. Pojawia się na Ow2 w podziemiach Ankrahmun. Jej drop to:</p>
                            <ul>
                                <li>Itemki Ow2</li>
                                <li>Owocki Życia 10/25/50</li>
                                <li>Przepustka na Dungeon Pustynny</li>
                                <li>Resztki Mumii - można nimi ulepszyć Talizman Handlarza w Balsam Mumii, który daje lepsze statystyki niż Talizman Handlarza</li>
                            </ul>
                            <h4>Lodzio</h4>
                            <p>Ma 880k HP. Pojawia się na Ow3 w dziurze przy Obozie Alpinistów. Jego drop to:</p>
                            <ul>
                                <li>Itemki Ow3</li>
                                <li>Owocki Życia 10/25/50</li>
                                <li>Kula Czasu</li>
                                <li>Przepustka na Dungeon Lodowy</li>
                                <li>Demoniczna Przepustka</li>
                                <li>Nos Lodzia - Można nim ulepszyć Balsam Mumii. Daje wtedy lepsze statystyki niż poprzednia wersja</li>
                            </ul>
                            <h4>Grzybowa Królowa</h4>
                            <p>Ma 2.250m HP. Pojawia się na Ow4_3 w podziemiach mapy. Jej drop to:</p>
                            <ul>
                                <li>Itemki Ow4_1/Ow4_2</li>
                                <li>Kryształ Podziemi - potrzebny do craftingu Artefaktu Ognia Lv.1</li>
                                <li>Nawiedzony Pierścień Szansy Opętanych Dusz</li>
                                <li>Owoc Życia 25/50/100</li>
                                <li>Kula Czasu</li>
                                <li>Przepustka na Podziemną Eskapadę</li>
                                <li>Demoniczna Przepustka</li>
                            </ul>
                            <h4>Lord Pyrokar</h4>
                            <p>Ma 6.95m HP. Pojawia się na Ow4_3 w podziemiach mapy. Jego drop to:</p>
                            <ul>
                                <li>Itemki Ow4_3</li>
                                <li>Kryształ Podziemi - potrzebny do craftingu Artefaktu Ognia Lv.1</li>
                                <li>Spopielony Amulet</li>
                                <li>Owoc Życia 25/50/100</li>
                                <li>Kula Czasu</li>
                                <li>Przepustka na Podziemną Eskapadę</li>
                                <li>Demoniczna Przepustka</li>
                                <li>Potka Many 100</li>
                                <li>Eliksir Słońca (M)</li>
                            </ul>
                            <h4>Władca Piekieł</h4>
                            <p>Ma ??? HP. Pojawia się na Ow4_3 w podziemiach mapy. Jego drop to:</p>
                            <ul>
                                <li>???</li>
                                <li>???</li>
                                <li>???</li>
                                <li>???</li>
                            </ul>
                            
                        </div>
                    <!--1bestiariusz-->
                    <button class="accordion nested"><i class=""></i>Bestiariusz</button>
                        <div class="panel nested-panel">
                            <p>Dzieli się na 3 kategorie</p>
                            <ul>
                                <li>OpenWorld</li>
                                <li>Dungeon</li>
                                <li>Full bestiary</li>
                            </ul>
                            <h4>OpenWorld</h4>
                            <p>Bestiariusz leveluje się zabijając moby, po tym jak zabije się odpowiednią ilość mobów otrzymuje się 1 Punkt do danego moba, 1 do FullBestiary oraz 1 Punkt mapy. Po zdobyciu następującej ilości Punktów na danym mobie otrzymuje się bonusy takie jak</p>
                            <ul>
                                <li>5 punktów - 0,5% MAX HP</li>
                                <li>10 punktów - 0,5% ATK DMG</li>
                                <li>15 punktów - 1,5% MAX HP</li>
                                <li>20 punktów - 1,5% ATK DMG</li>
                            </ul>
                            <p>Za punkty map za moby na danej mapie otrzymuje się % Do obrażeń na tej właśnie mapie.</p>
                            <p>Wszystkie zsumowane punkty map dają dodatkowe MAX Stellium. Moby na dungeonach mają szansę na zaliczenie się do Bestiary jako moby z Ow, każdy mob na dungeonie ma przypisanego konkretnego moba z Ow.</p>
                            <h4>Dungeon</h4>
                            <p>Bestiariusz leveluje się ukańczając dungeony, po tym jak zrobi się odpowiednią ilość dungeonów otrzymuje się 1 Punkt dungów oraz 1 punkt do FullBestiary. Punkty dungów na danym dungeonie dają bonus do DMG na tym właśnie dungu. Wszystkie zsumowane punkty dungów dają ogólny dmg na dungeonach.</p>
                            <h4>FullBestiary</h4>
                            <p>Wszystkie zliczone punkty FullBestiary dają takie statystyki jak:</p>
                            <ul>
                                <li>% Silny przeciwko potworom</li>
                                <li>+% Odporności na Ogień/Trucizne/Obumarcie</li>
                                <li>Od 1500 punktów +% Obrażenia bronii</li>
                            </ul>
                            <h4>Warunek dodania się moba/dungeona do bestiariusza</h4>
                            <p>Aby mob dodał się do statystyk w bestiariuszu trzeba zadać mu minimum 10% jego HP (np. jeśli mob ma 1k HP trzeba zadać mu minimum 100 HP).</p>
                            <p>Aby dungeon dodał się do statystyk w bestiariuszu trzeba zadać końcowemu bossowi minimum 1% HP.</p>
                        </div>
                    <!--1dynmapa-->
                    <button class="accordion nested"><i class=""></i>Dynmapa</button>
                        <div class="panel nested-panel">
                            <h4>Najważniejsze funkcje dynmapy</h4>
                            <p>Mapy - możliwość wybrania mapy, która nas interesuje</p>
                            <p>Znaczniki - możliwość wybrania kategorii pod, którą znajdują się dokładne kordy NPC/lokacji/innych przydatnych miejsc.</p>
                            <h4>Przykład</h4>
                            <p>Nie wiesz gdzie jest NPC Blair, dlatego chcesz sprawdzić gdzie się znajduję, w tym celu należy najpierw w zakładce "Mapy" wybrać Niebieską Zarazę (ponieważ na tej mapie znajduje się Blair), a następnie w zakładce "Znaczniki" wybrać "Misje Główne" i poszukać Blair.</p>
                            <p>https://jbwm.pl/mapa-skymmo</p>
                        </div>
                    <!--1artefakty-->
                    <button class="accordion nested"><i class=""></i>Artefakty</button>
                        <div class="panel nested-panel">
                            <h4>Rodzaje Artefaktów</h4>
                            <ul>
                                <li>Artefakt Siły</li>
                                <li>Artefakt Defensywy</li>
                                <li>Artefakt Żywiołu</li>
                            </ul>
                            <!--1artefakt sily-->
                            <button class="accordion nested"><i class=""></i>Artefakt Siły</button>
                                <div class="panel nested-panel">
                                    <p>Do kupienia na Eventowym łowisku "Gorzyce", daje takie statystyki jak</p>
                                    <ul>
                                        <li>Zwiększone obrażenia przeciwko morskim stworzeniom</li>
                                        <li>Obrażenia</li>
                                    </ul>
                                </div>
                            <!--1artefakt defensywy-->
                            <button class="accordion nested"><i class=""></i>Artefakt Defensywy</button>
                                <div class="panel nested-panel">
                                    <p>Pierwszy zdobywa się jak drop z Wpienionego Handlarza, są 2 warianty</p>
                                    <ul>
                                        <li>PvE - jedną z statystyk jest odporność na potwory</li>
                                        <li>PvP - jedną z statystyk jest odporność na graczy</li>
                                    </ul>
                                    <p>Daje on takie statystyki jak</p>
                                    <ul>
                                        <li>Zdrowie +x</li>
                                        <li>Odporność na graczy/potwory</li>
                                        <li>Zdrowie %x</li>
                                    </ul>
                                    <h4>Ulepszanie</h4>
                                    <p>Artefakty te ulepsza się u NPC Maciek na spawnie w następujący sposób</p>
                                    <ul>
                                        <li>Talizman Handlarza + Resztki Mumii = Balsam do mumifikacji</li>
                                        <li>Balsam do mumifikacji (+5 każde ulepszenie to 1 kryształ podziemii) + Nos Lodzia = Lodowa Sfera</li>
                                        <li>Lodowa Sfera PvP (+15 każde ulepszenie to 1 kryształ podziemii) + Lodowa Sfera PvE (+15 każde ulepszenie to 1 kryształ podziemii) + Zwój Dualności = Kryształ Dualności - najmocniejszy artefakt dający zarówno odporności PvP jak i PvE</li>
                                    </ul>
                                </div>
                            <!--1artefakt zywiolu-->
                            <button class="accordion nested"><i class=""></i>Artefakt Żywiołu</button>
                                <div class="panel nested-panel">
                                    <h4>Artafakt Ognia</h4>
                                    <p>Pierwszy Artefakt Żywiołu kupuje się u NPC Żywiołak Ognia za różne itemy oraz Kryształ Podziemii, można go ulepszać aż do 4 poziomu - Legendarny drop WorldBossów na Ow4. Daje odporność na ogień.</p>
                                    <h4>Artefakt Jadu</h4>
                                    <p>Ten Artefakt Żywiołu kupuje się u NPC Żywiołak Jadu za różne itemy raz Kryształ Podziemii, można go ulepszać aż do 4 poziomu - Legendarny drop WorldBossów na Ow4. Daje odporność na truciznę.</p>
                                    <h4>Artefakt Cienia</h4>
                                    <p>Ten Artefakt Żywiołu kupuje się u NPC Żywiołak Jadu LUB u NPC Żywiołak Ognia za Artefakt Ognia i Jadu Lv.4 (+15) oraz Kryształy Podziemii - Legendarny drop WorldBossów na Ow4. Daje odporność na truciznę i ogień.</p>
                                </div>
                        </div>
                    <!--1sakiewki-->
                    <button class="accordion nested"><i class=""></i>Sakiewki</button>
                        <div class="panel nested-panel">
                            
                        </div>
                    <!--1stellium-->
                    <button class="accordion nested"><i class=""></i>Stellium</button>
                        <div class="panel nested-panel">
                            
                        </div>
            </div>
        <!--1wyspa-->
        <h2 class="category-header">Wyspa</h2>
            <!--1profesje-->
            <button class="accordion"><i class=""></i>Profesje</button>
                <div class="panel">
                    <!--1gornictwo-->
                    <button class="accordion nested"><i class=""></i>Górnictwo</button>
                        <div class="panel nested-panel">
                            
                        </div>
                    <!--1rolnictwo-->
                    <button class="accordion nested"><i class=""></i>Rolnictwo</button>
                        <div class="panel nested-panel">
                            
                        </div>
                    <!--1drwalnictwo-->
                    <button class="accordion nested"><i class=""></i>Drwalnictwo</button>
                        <div class="panel nested-panel">
                            
                        </div>
                    <!--1alchemia-->
                    <button class="accordion nested"><i class=""></i>Alchemia</button>
                        <div class="panel nested-panel">
                            
                        </div>
                </div>
            <!--1zaczarowanie przedmiotu-->
            <button class="accordion"><i class=""></i>Stół Zaklęć</button>
                <div class="panel">

                </div>
            <!--1/sklep-->
            <button class="accordion"><i class=""></i>/sklep</button>
                <div class="panel">

                </div>
        <h2 class="category-header">Ekwipunek</h2>
            <!--1wyposazenie - przedzialy statystyk-->
            <button class="accordion"><i class=""></i>Wyposażenie - Przedziały statystyk</button>
                <div class="panel">

                </div>
            <!--1plecak-->
            <button class="accordion"><i class=""></i>Plecak</button>
                <div class="panel">

                </div>
            <!--1szafa-->
            <button class="accordion"><i class=""></i>Szafa</button>
                <div class="panel">

                </div>
            
        <h2 class="category-header">Inne</h2>
            <!--1komunikaty-->
            <button class="accordion nested"><i class=""></i>Komunikaty</button>
                <div class="panel nested-panel">

                </div>
            <!--1reputacja-->
            <button class="accordion nested"><i class=""></i>Reputacja</button>
                <div class="panel nested-panel">

                </div>
            <!--1itemshop-->
            <button class="accordion nested"><i class=""></i>/itemshop</button>
                <div class="panel nested-panel">

                </div>
            <!--1eventy-->
            <button class="accordion nested"><i class=""></i>Eventy</button>
                <div class="panel nested-panel">

                </div>
            <!--1rodzaje czatow-->
            <button class="accordion nested"><i class=""></i>Rodzaje czatów</button>
                <div class="panel nested-panel">

                </div>
    </main>

    <script>
        const mainHeader = document.querySelector('.main-header');
        const chaptersHeader = document.querySelector('.chapters-header');
        
        window.addEventListener('scroll', () => {
            const headerBottom = mainHeader.getBoundingClientRect().bottom;
            
            if (headerBottom < 0) {
                chaptersHeader.classList.add('visible');
            } else {
                chaptersHeader.classList.remove('visible');
            }
        });

        window.allContent = [
            {
                id: 'npc',
                title: 'NPC',
                content: 'Biolog Kolekcjoner Stwórca Dungeon Master',
                tags: ['npc', 'biolog', 'kolekcjoner', 'stworca', 'dungeon_master']
            },
            {
                id: 'biolog',
                title: 'Biolog',
                content: 'Side Quest bonusy itemki Ząb dzika Skorupa Skarabeusza Wilcza Łapa Antyczna Cięciwa',
                tags: ['biolog', 'quest', 'bonusy', 'itemki']
            },
            {
                id: 'kolekcjoner',
                title: 'Kolekcjoner',
                content: 'Side Quest moby minibossy bossy nagrody exp reputacja',
                tags: ['kolekcjoner', 'quest', 'moby', 'exp']
            },
            {
                id: 'stworca',
                title: 'Stwórca',
                content: 'Crafting fabryki materiały akcesoria ewolucje petów konsumpcyjne',
                tags: ['stworca', 'crafting', 'fabryki', 'materialy']
            },
            {
                id: 'dungeon_master',
                title: 'Dungeon Master',
                content: 'Przepustki fragmenty cząstki wymiana klucze kuferki sakiewki',
                tags: ['dungeon_master', 'przepustki', 'klucze', 'wymiana']
            },
            {
                id: 'gildii',
                title: 'Gildie i Party',
                content: 'Gildie party zakładanie wyposażenie statku skilltree punkty',
                tags: ['gildie', 'party', 'statek', 'skilltree']
            },
            {
                id: 'gildie',
                title: 'Gildie',
                content: 'Zakładanie gildii statek gildyjny wyposażenie skilltree punkty',
                tags: ['gildie', 'statek', 'wyposazenie', 'skilltree']
            },
            {
                id: 'system_party',
                title: 'System Party',
                content: 'Komendy party OpenWorld Dungeony buffy debuffy idealne party',
                tags: ['party', 'komendy', 'buffy', 'dungeony']
            },
            {
                id: 'stellium',
                title: 'Stellium',
                content: 'Energia teleportacja max stellium regeneracja panel',
                tags: ['stellium', 'teleportacja', 'energia', 'regeneracja']
            },
            {
                id: 'system_wysp',
                title: 'System Wysp',
                content: 'Komendy punkty wyspy ulepszenia zarządzanie',
                tags: ['wyspy', 'komendy', 'punkty', 'ulepszenia']
            },
            {
                id: 'skille',
                title: 'Skille',
                content: 'System Profesji Profesje zbierackie System Alchemii System Wędkarstwa walka łowca górnictwo zielarstwo rolnictwo alchemia wędkarstwo',
                tags: ['skille', 'profesje', 'alchemia', 'wedkarstwo']
            },
            {
                id: 'system_profesji',
                title: 'System Profesji',
                content: 'Walka Łowca Górnictwo exp moby bossy kopalnie surowce',
                tags: ['profesje', 'walka', 'lowca', 'gornictwo']
            },
            {
                id: 'walka',
                title: 'Walka',
                content: 'Moby exp wyposażenie kowale przedmioty',
                tags: ['walka', 'moby', 'exp', 'wyposazenie']
            },
            {
                id: 'lowca',
                title: 'Łowca',
                content: 'Bossy minibossy worldbossy metiny drop exp',
                tags: ['lowca', 'bossy', 'drop', 'exp']
            },
            {
                id: 'gornictwo',
                title: 'Górnictwo',
                content: 'Surowce kopalnia generator cobbla basalt exp',
                tags: ['gornictwo', 'surowce', 'kopalnia', 'generator']
            },
            {
                id: 'profesje_zbierackie',
                title: 'Profesje zbierackie',
                content: 'Zielarstwo Rolnictwo rośliny surowce exp wyposażenie',
                tags: ['zielarstwo', 'rolnictwo', 'rosliny', 'surowce']
            },
            {
                id: 'zielarstwo',
                title: 'Zielarstwo',
                content: 'Rośliny motyka sierp exp surowce wzór na podwójny drop',
                tags: ['zielarstwo', 'rosliny', 'exp', 'surowce']
            },
            {
                id: 'rolnictwo',
                title: 'Rolnictwo',
                content: 'Rośliny motyka sierp exp surowce wzór na podwójny drop',
                tags: ['rolnictwo', 'rosliny', 'exp', 'surowce']
            },
            {
                id: 'system_alchemii',
                title: 'System Alchemii',
                content: 'Gotowanie mikstury przedmioty receptury',
                tags: ['alchemia', 'gotowanie', 'mikstury', 'receptury']
            },
            {
                id: 'system_wedkarstwa',
                title: 'System Wędkarstwa',
                content: 'Łowiska przynęty żyłki zanęty Gorzyce potwory morskie łowienie ryb',
                tags: ['wedkarstwo', 'lowienie', 'ryby', 'przynety']
            },
            {
                id: 'system_zwierzakow',
                title: 'System Zwierzaków (Petów)',
                content: 'Levelowanie ewolucja Minotaur Rozdymka Samuraj Reaper Goral Burel Smykogryf',
                tags: ['pety', 'zwierzaki', 'ewolucja', 'levelowanie']
            },
            {
                id: 'system_klas',
                title: 'System Klas',
                content: 'Wojownik Ninja Mag statystyki umiejętności wzory na obrażenia',
                tags: ['klasy', 'wojownik', 'ninja', 'mag', 'statystyki']
            },
            {
                id: 'wojownik',
                title: 'Wojownik',
                content: 'Statystyki bazowe furia pancerz zdrowie obrażenia regeneracja stamina',
                tags: ['wojownik', 'statystyki', 'furia', 'walka']
            },
            {
                id: 'ninja',
                title: 'Ninja',
                content: 'Statystyki bazowe mana pancerz zdrowie obrażenia regeneracja stamina',
                tags: ['ninja', 'statystyki', 'mana', 'walka']
            },
            {
                id: 'mag',
                title: 'Mag',
                content: 'Statystyki bazowe mana pancerz zdrowie obrażenia magiczne regeneracja',
                tags: ['mag', 'statystyki', 'mana', 'magia']
            },
            {
                id: 'wzory_obrazenia',
                title: 'Wzory na obrażenia',
                content: 'Wojownik Ninja Mag miecz łuk sztylet kostur umiejętności',
                tags: ['obrazenia', 'wzory', 'umiejetnosci', 'walka']
            },
            {
                id: 'system_bonusow',
                title: 'System Bonusów i Statystyk',
                content: 'Fortuna szybkość drop exp profesje amulet artefakty',
                tags: ['bonusy', 'statystyki', 'fortuna', 'drop']
            },
            {
                id: 'fortuna',
                title: 'Fortuna',
                content: 'Górnictwo drwalnictwo rolnictwo zielarstwo bonusy',
                tags: ['fortuna', 'profesje', 'bonusy', 'sety']
            },
            {
                id: 'bonusy_szybkosc',
                title: 'Bonusy do szybkości',
                content: 'Łowienie zbieranie kopanie bransolety sety',
                tags: ['szybkosc', 'bonusy', 'profesje', 'sety']
            },
            {
                id: 'bonusy_drop_exp',
                title: 'Zwiększony drop i exp',
                content: 'Drop exp vip minivip rękawiczki rybki bonusy',
                tags: ['drop', 'exp', 'bonusy', 'vip']
            },
            {
                id: 'bonusy_profesje',
                title: 'Bonusy do profesji',
                content: 'Amulety profesji klasy exp bonusy',
                tags: ['profesje', 'amulety', 'bonusy', 'exp']
            },
            {
                id: 'system_artefaktow',
                title: 'System Artefaktów',
                content: 'Artefakt Siły Artefakt Defensywny Artefakty Żywiołów',
                tags: ['artefakty', 'sila', 'defensywa', 'zywioly']
            },
            {
                id: 'artefakt_sily',
                title: 'Artefakt Siły',
                content: 'Gorzyce morskie stworzenia obrażenia',
                tags: ['artefakt', 'sila', 'obrazenia', 'gorzyce']
            },
            {
                id: 'artefakt_defensywny',
                title: 'Artefakt Defensywny',
                content: 'PvE PvP odporność zdrowie pancerz',
                tags: ['artefakt', 'defensywa', 'odpornosc', 'zdrowie']
            },
            {
                id: 'artefakty_zywiolow',
                title: 'Artefakty Żywiołów',
                content: 'Ogień Jad Kryształ Podziemii WorldBossy',
                tags: ['artefakty', 'zywioly', 'ogien', 'jad']
            },
            {
                id: 'system_dungeonow',
                title: 'System Dungeonów',
                content: 'Kraina Rozkoszy trofea boss nagrody Wykwintna Truskawka',
                tags: ['dungeony', 'boss', 'trofea', 'nagrody']
            },
            {
                id: 'kraina_rozkoszy',
                title: 'Kraina Rozkoszy',
                content: 'Dungeon Wykwintna Truskawka moby boss reputacja',
                tags: ['dungeon', 'kraina_rozkoszy', 'boss', 'reputacja']
            },
            {
                id: 'system_trofeow',
                title: 'System Trofeów',
                content: 'Trofea dungeony bossy nagrody bonusy',
                tags: ['trofea', 'dungeony', 'bossy', 'bonusy']
            },
            {
                id: 'system_zaczarowanego_stolu',
                title: 'System Zaczarowanego Stołu',
                content: 'Rollowanie statystyk zmianki crafting stołu',
                tags: ['zaczarowany_stol', 'rollowanie', 'statystyki', 'crafting']
            },
            {
                id: 'system_sakiewek',
                title: 'System Sakiewek i Plecaka',
                content: 'Sakiewki plecak sortowanie ulepszanie miejsca crafting',
                tags: ['sakiewki', 'plecak', 'sortowanie', 'ulepszanie']
            },
            {
                id: 'sakiewki',
                title: 'Sakiewki',
                content: 'NPC lokalizacje crafting sortowanie ulepszanie miejsca',
                tags: ['sakiewki', 'crafting', 'sortowanie', 'ulepszanie']
            },
            {
                id: 'system_plecaka',
                title: 'System Plecaka',
                content: 'Sloty itemshop kity szkatułki ulepszanie',
                tags: ['plecak', 'sloty', 'itemshop', 'ulepszanie']
            }
        ];

        function calculateMatch(query, text) {
            const queryWords = query.toLowerCase().trim().split(/\s+/);
            const textWords = text.toLowerCase().trim().split(/\s+/);
            
            let matches = 0;
            let totalWeight = 0;
            
            queryWords.forEach(word => {
                if (word.length < 2) return; // Pomijamy krótkie słowa
                
                // Zwiększamy wagę dla dokładnych dopasowań w tagach
                if (text.toLowerCase().includes(word)) {
                    matches += 1;
                    totalWeight += 1;
                    
                    // Dodatkowe punkty za dokładne dopasowanie w tagach
                    if (text.toLowerCase().includes(`tags: [`) && 
                        text.toLowerCase().includes(word)) {
                        matches += 0.5;
                        totalWeight += 0.5;
                    }
                }
            });
            
            return totalWeight > 0 ? (matches / totalWeight) * 100 : 0;
        }

        function showResults(query) {
            const container = document.getElementById('searchResults');
            const mobileContainer = document.getElementById('mobileSearchResults');
            
            if (!container || !mobileContainer) {
                console.error("Nie znaleziono kontenerów wyników wyszukiwania!");
                return;
            }

            // Wyczyść poprzednie wyniki
            container.innerHTML = '';
            mobileContainer.innerHTML = '';
            
            if (!query.trim()) {
                container.style.display = 'none';
                mobileContainer.style.display = 'none';
                return;
            }

            if (!window.allContent || !Array.isArray(window.allContent)) {
                console.error("Brak tablicy allContent!");
                return;
            }

            const results = window.allContent.filter(item => {
                const titleMatch = item.title && item.title.toLowerCase().includes(query.toLowerCase());
                const textMatch = item.text && item.text.toLowerCase().includes(query.toLowerCase());
                const tagsMatch = item.tags && (
                    (Array.isArray(item.tags) && item.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase()))) ||
                    (typeof item.tags === 'string' && item.tags.toLowerCase().includes(query.toLowerCase()))
                );
                return titleMatch || textMatch || tagsMatch;
            });

            if (results.length > 0) {
                results.forEach(result => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'search-result-item';
                    resultElement.innerHTML = `
                        <div class="search-result-title">${result.title}</div>
                        <div class="search-result-text">${result.text.substring(0, 100)}...</div>
                    `;
                    
                    resultElement.addEventListener('click', () => {
                        const element = document.getElementById(result.id);
                        if (element) {
                            openAccordionsToElement(element);
                            element.scrollIntoView({ behavior: 'smooth' });
                        }
                    });

                    container.appendChild(resultElement);
                    mobileContainer.appendChild(resultElement.cloneNode(true));
                });

                container.style.display = 'block';
                mobileContainer.style.display = 'block';
            } else {
                container.style.display = 'none';
                mobileContainer.style.display = 'none';
            }
        }

        function openAccordionsToElement(element) {
            console.log("Otwieranie akordeonów do elementu:", element);

            // Znajdź wszystkie akordeony nadrzędne
            let accordionsToOpen = [];
            let currentElement = element;

            // Jeśli element jest akordeonem, dodaj go do listy
            if (currentElement.classList.contains('accordion')) {
                accordionsToOpen.unshift(currentElement);
            }

            // Znajdź wszystkie nadrzędne akordeony
            while (currentElement) {
                let parent = currentElement.parentElement;
                if (parent) {
                    if (parent.classList.contains('panel')) {
                        let parentAccordion = parent.previousElementSibling;
                        if (parentAccordion && parentAccordion.classList.contains('accordion')) {
                            accordionsToOpen.unshift(parentAccordion);
                        }
                    }
                }
                currentElement = parent;
            }

            console.log("Znalezione akordeony do otwarcia:", accordionsToOpen);

            // Najpierw zamknij wszystkie panele
            document.querySelectorAll('.accordion').forEach(acc => {
                acc.classList.remove('active');
            });
            document.querySelectorAll('.panel').forEach(panel => {
                panel.style.maxHeight = null;
            });

            // Otwórz akordeony od góry do dołu
            accordionsToOpen.forEach((accordion, index) => {
                console.log("Otwieranie akordeonu:", accordion);
                
                // Aktywuj akordeon
                accordion.classList.add('active');
                
                // Znajdź i otwórz panel
                const panel = accordion.nextElementSibling;
                if (panel && panel.classList.contains('panel')) {
                    // Oblicz podstawową wysokość panelu
                    let baseHeight = 0;
                    
                    // Dodaj wysokość wszystkich elementów, które nie są panelami
                    Array.from(panel.children).forEach(child => {
                        if (!child.classList.contains('panel')) {
                            baseHeight += child.offsetHeight;
                        }
                    });
                    
                    // Dodaj padding
                    const styles = window.getComputedStyle(panel);
                    baseHeight += parseFloat(styles.paddingTop) + parseFloat(styles.paddingBottom);
                    
                    // Zwiększony margines bezpieczeństwa
                    baseHeight += 80;
                    
                    // Ustaw początkową wysokość
                    panel.style.maxHeight = baseHeight + "px";
                    
                    // Jeśli to nie jest ostatni akordeon, poczekaj na animację
                    if (index < accordionsToOpen.length - 1) {
                        setTimeout(() => {
                            // Zaktualizuj wysokość po otwarciu
                            let totalHeight = baseHeight;
                            
                            // Dodaj wysokość otwartych paneli zagnieżdżonych
                            const openPanels = panel.querySelectorAll('.accordion.active + .panel');
                            openPanels.forEach(openPanel => {
                                if (openPanel.style.maxHeight) {
                                    totalHeight += parseFloat(openPanel.style.maxHeight);
                                }
                            });
                            
                            // Dodaj wysokość wszystkich zagnieżdżonych elementów
                            const nestedElements = panel.querySelectorAll(':scope > *:not(.panel):not(.accordion)');
                            nestedElements.forEach(nested => {
                                totalHeight += nested.offsetHeight;
                            });
                            
                            panel.style.maxHeight = totalHeight + "px";
                        }, 150);
                    }
                }
            });

            // Przewiń do elementu z opóźnieniem
            setTimeout(() => {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, accordionsToOpen.length * 200);
        }

        // Obsługa kliknięć w linki wewnętrzne
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    openAccordionsToElement(targetElement);
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        });

        // Najpierw usuńmy wszystkie stare listenery
        function usunStareListenery() {
            const searchInput = document.getElementById('searchInput');
            const mobileSearchInput = document.getElementById('mobileSearchInput');
            
            if (searchInput) {
                const newSearchInput = searchInput.cloneNode(true);
                searchInput.parentNode.replaceChild(newSearchInput, searchInput);
            }
            
            if (mobileSearchInput) {
                const newMobileSearchInput = mobileSearchInput.cloneNode(true);
                mobileSearchInput.parentNode.replaceChild(newMobileSearchInput, mobileSearchInput);
            }
        }

        // Nowa funkcja wyszukiwania
        function noweWyszukiwanie(query) {
            const container = document.getElementById('searchResults');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (!query || query.trim().length < 2) {
                container.style.display = 'none';
                return;
            }
            
            query = query.toLowerCase().trim();
            console.log("Szukam:", query);
            
            if (!window.allContent || !Array.isArray(window.allContent)) {
                console.error("Brak tablicy allContent!");
                return;
            }
            
            const znalezione = window.allContent.filter(item => {
                if (!item || !item.id) return false;
                
                const title = (item.title || "").toString().toLowerCase();
                const content = (item.content || "").toString().toLowerCase();
                
                // Sprawdzamy tagi
                let tagMatch = false;
                if (item.tags) {
                    if (typeof item.tags === 'string') {
                        tagMatch = item.tags.toLowerCase().includes(query);
                    } else if (Array.isArray(item.tags)) {
                        tagMatch = item.tags.some(tag => 
                            typeof tag === 'string' && tag.toLowerCase().includes(query)
                        );
                    }
                }
                
                return title.includes(query) || content.includes(query) || tagMatch;
            });
            
            console.log("Znaleziono dopasowań:", znalezione.length);
            
            if (znalezione.length > 0) {
                znalezione.slice(0, 10).forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'search-result-item';
                    div.textContent = item.title;
                    
                    div.addEventListener('click', () => {
                        const element = document.getElementById(item.id);
                        if (element && typeof openAccordionsToElement === 'function') {
                            openAccordionsToElement(element);
                            setTimeout(() => {
                                element.scrollIntoView({behavior: 'smooth', block: 'center'});
                                container.style.display = 'none';
                            }, 300);
                        }
                    });
                    
                    container.appendChild(div);
                });
                container.style.display = 'block';
            } else {
                container.style.display = 'none';
            }
        }

        // Inicjalizacja wyszukiwania
        usunStareListenery();

        let searchInput = document.getElementById('searchInput');
        let mobileSearchInput = document.getElementById('mobileSearchInput');

        if (searchInput) {
            searchInput.addEventListener('input', function() {
                noweWyszukiwanie(this.value);
            });
        }

        if (mobileSearchInput) {
            mobileSearchInput.addEventListener('input', function() {
                noweWyszukiwanie(this.value);
            });
        }

        function setupAccordion(buttons) {
            // Funkcja do obliczania pełnej wysokości elementu z marginesami
            function getFullHeight(element) {
                const styles = window.getComputedStyle(element);
                const marginTop = parseFloat(styles.marginTop);
                const marginBottom = parseFloat(styles.marginBottom);
                const paddingTop = parseFloat(styles.paddingTop);
                const paddingBottom = parseFloat(styles.paddingBottom);
                return element.offsetHeight + marginTop + marginBottom + paddingTop + paddingBottom;
            }

            // Funkcja rekurencyjna do obliczania całkowitej wysokości panelu
            function calculatePanelHeight(panel) {
                if (!panel || !panel.style.maxHeight) return 0;
                
                let totalHeight = 0;
                const styles = window.getComputedStyle(panel);
                const padding = parseFloat(styles.paddingTop) + parseFloat(styles.paddingBottom);
                
                // Dodaj wysokość każdego dziecka, które nie jest panelem
                Array.from(panel.children).forEach(child => {
                    if (!child.classList.contains('panel')) {
                        totalHeight += getFullHeight(child);
                    }
                });
                
                // Dodaj wysokość otwartych paneli zagnieżdżonych
                const openNestedPanels = panel.querySelectorAll(':scope > .accordion.active + .panel');
                openNestedPanels.forEach(nestedPanel => {
                    if (nestedPanel.style.maxHeight) {
                        // Zagnieżdżone panele mogą mieć swoje własne zagnieżdżone panele
                        let nestedHeight = 0;
                        Array.from(nestedPanel.children).forEach(child => {
                            if (!child.classList.contains('panel')) {
                                nestedHeight += getFullHeight(child);
                            }
                        });
                        
                        // Dodaj wysokości zagnieżdżonych paneli
                        const deepNestedPanels = nestedPanel.querySelectorAll(':scope > .accordion.active + .panel');
                        deepNestedPanels.forEach(deepPanel => {
                            if (deepPanel.style.maxHeight) {
                                nestedHeight += parseFloat(deepPanel.style.maxHeight);
                            }
                        });
                        
                        totalHeight += nestedHeight + padding;
                    }
                });
                
                return totalHeight + padding;
            }
            
            // Funkcja do aktualizacji wysokości panelu i wszystkich nadrzędnych paneli
            function updatePanelHeights(panel) {
                // Ustaw wysokość panelu
                const panelHeight = calculatePanelHeight(panel);
                panel.style.maxHeight = (panelHeight + 20) + "px"; // Dodajemy dodatkowy margines
                
                // Rekurencyjnie aktualizuj wysokości paneli nadrzędnych
                let parent = panel.parentElement;
                while (parent) {
                    if (parent.classList.contains('panel') && parent.style.maxHeight) {
                        const parentHeight = calculatePanelHeight(parent);
                        parent.style.maxHeight = (parentHeight + 20) + "px"; // Dodajemy dodatkowy margines
                    }
                    parent = parent.parentElement;
                }
            }

            buttons.forEach(button => {
                button.addEventListener("click", function(e) {
                    e.stopPropagation();
                    
                    this.classList.toggle("active");
                    const panel = this.nextElementSibling;
                    
                    if (panel.style.maxHeight) {
                        // Zamykanie panelu
                        panel.style.maxHeight = null;
                        
                        // Zamknij wszystkie zagnieżdżone panele
                        const nestedPanels = panel.querySelectorAll('.panel');
                        const nestedButtons = panel.querySelectorAll('.accordion');
                        nestedPanels.forEach(nestedPanel => {
                            nestedPanel.style.maxHeight = null;
                        });
                        nestedButtons.forEach(nestedButton => {
                            nestedButton.classList.remove('active');
                        });
                        
                        // Aktualizuj wysokości paneli nadrzędnych
                        let parent = panel.parentElement;
                        while (parent) {
                            if (parent.classList.contains('panel') && parent.style.maxHeight) {
                                updatePanelHeights(parent);
                            }
                            parent = parent.parentElement;
                        }
                    } else {
                        // Otwieranie panelu - ustaw początkową wysokość
                        let contentHeight = Array.from(panel.children)
                            .filter(child => !child.classList.contains('panel') && !child.classList.contains('accordion'))
                            .reduce((height, child) => height + getFullHeight(child), 0);
                        
                        // Uwzględnij wysokość przycisków akordeonu
                        const accordionButtons = Array.from(panel.querySelectorAll(':scope > .accordion'));
                        contentHeight += accordionButtons.reduce((height, button) => height + getFullHeight(button), 0);
                        
                        const styles = window.getComputedStyle(panel);
                        const padding = parseFloat(styles.paddingTop) + parseFloat(styles.paddingBottom);
                        
                        panel.style.maxHeight = (contentHeight + padding + 20) + "px"; // Dodajemy dodatkowy margines
                        
                        // Aktualizuj wysokości wszystkich paneli nadrzędnych
                        let parent = panel.parentElement;
                        while (parent) {
                            if (parent.classList.contains('panel') && parent.style.maxHeight) {
                                updatePanelHeights(parent);
                            }
                            parent = parent.parentElement;
                        }
                    }
                });
            });
        }

        setupAccordion(document.querySelectorAll('.accordion'));

        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.search-container');
            const searchResults = document.getElementById('searchResults');
            if (!searchContainer.contains(e.target)) {
                searchResults.style.display = 'none';
            }
        });

        // Dodanie animacji przy przewijaniu
        const observerOptions = {
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Dodanie klasy fade-in do wszystkich sekcji
        const sections = document.querySelectorAll('.fade-in');
        sections.forEach(section => {
            observer.observe(section);
        });

        // Dodanie obsługi przycisków reset
        document.querySelectorAll('.nav-link.reset, .mobile-nav-link.reset').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                // Zamknij wszystkie panele
                const allPanels = document.querySelectorAll('.panel');
                allPanels.forEach(panel => {
                    panel.style.maxHeight = null;
                });
                // Usuń klasę active ze wszystkich akordeonów
                const allAccordions = document.querySelectorAll('.accordion');
                allAccordions.forEach(acc => {
                    acc.classList.remove('active');
                });
                // Jeśli menu mobilne jest otwarte, zamknij je
                const mobileNav = document.querySelector('.mobile-nav');
                const hamburger = document.querySelector('.hamburger-menu');
                if (mobileNav.classList.contains('active')) {
                    mobileNav.classList.remove('active');
                    hamburger.classList.remove('active');
                    const spans = hamburger.querySelectorAll('span');
                    spans[0].style.transform = 'none';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'none';
                }
                // Przewiń na górę strony
                window.scrollTo({ top: 0, behavior: 'smooth' });
                // Wyczyść zapisane sekcje
                localStorage.removeItem('openSections');
            });
        });

        // System zapisywania otwartych sekcji
        function saveOpenSections() {
            const openSections = [];
            document.querySelectorAll('.accordion.active').forEach(accordion => {
                openSections.push(accordion.id);
            });
            localStorage.setItem('openSections', JSON.stringify(openSections));
        }

        // Przywróć sekcje przy ładowaniu strony
        document.addEventListener('DOMContentLoaded', restoreOpenSections);

        // Dodaj obsługę mobilnego wyszukiwania
        document.getElementById('mobileSearchInput').addEventListener('input', function(e) {
            const query = e.target.value.trim();
            const searchResults = document.getElementById('searchResults');
            
            if (query.length < 2) {
                searchResults.style.display = 'none';
                return;
            }

            const results = window.allContent
                .map(item => ({
                    ...item,
                    score: calculateMatch(query, `${item.title} ${item.content} ${item.tags.join(' ')}`)
                }))
                .filter(item => item.score > 10) // Zmniejszamy próg dopasowania
                .sort((a, b) => b.score - a.score)
                .slice(0, 10);

            showResults(results);
        });

        // Obsługa menu hamburgerowego i wyszukiwania mobilnego
        const hamburger = document.querySelector('.hamburger-menu');
        const mobileNav = document.querySelector('.mobile-nav');
        const mobileSearchContainer = document.querySelector('.mobile-search-container');
        
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            mobileNav.classList.toggle('active');
            mobileSearchContainer.classList.toggle('active');
            
            // Animacja hamburger menu
            const spans = hamburger.querySelectorAll('span');
            if (hamburger.classList.contains('active')) {
                spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
                spans[1].style.opacity = '0';
                spans[2].style.transform = 'rotate(-45deg) translate(7px, -6px)';
                mobileSearchContainer.style.display = 'block';
            } else {
                spans[0].style.transform = 'none';
                spans[1].style.opacity = '1';
                spans[2].style.transform = 'none';
                mobileSearchContainer.style.display = 'none';
                document.getElementById('searchResults').style.display = 'none';
            }
        });

        function testSearch(query) {
          console.log("Test wyszukiwania dla: " + query);
          console.log("Zawartość allContent:", window.allContent);
          
          if (!window.allContent || !Array.isArray(window.allContent)) {
            console.error("allContent nie istnieje lub nie jest tablicą!");
            return;
          }
          
          let wyniki = window.allContent.filter(item => 
            item.title && item.title.toLowerCase().includes(query.toLowerCase()) ||
            item.text && item.text.toLowerCase().includes(query.toLowerCase())
          );
          
          console.log("Znaleziono wyników: " + wyniki.length);
          console.log(wyniki);
          
          // Spróbuj utworzyć element testowy na stronie
          const testDiv = document.createElement('div');
          testDiv.style.position = 'fixed';
          testDiv.style.top = '100px';
          testDiv.style.left = '50%';
          testDiv.style.transform = 'translateX(-50%)';
          testDiv.style.background = 'red';
          testDiv.style.color = 'white';
          testDiv.style.padding = '20px';
          testDiv.style.zIndex = '10000';
          testDiv.textContent = `Znaleziono ${wyniki.length} wyników dla "${query}"`;
          document.body.appendChild(testDiv);
        }

        // Sprawdź, czy nie jesteśmy na urządzeniu mobilnym
        if (window.innerWidth > 768) {
            // Pobierz pole wyszukiwania na PC
            const pcSearchInput = document.getElementById('searchInput');
            
            if (pcSearchInput) {
                // Dodaj słuchacza zdarzeń bezpośrednio do pola wyszukiwania PC
                pcSearchInput.addEventListener('input', function() {
                    const query = this.value.trim();
                    
                    // Pobierz kontener wyników
                    const resultsContainer = document.getElementById('searchResults');
                    
                    // Wyczyść poprzednie wyniki
                    if (resultsContainer) {
                        resultsContainer.innerHTML = '';
                        
                        // Jeśli zapytanie jest za krótkie, ukryj wyniki
                        if (query.length < 2) {
                            resultsContainer.style.display = 'none';
                            return;
                        }
                        
                        // Znajdź pasujące wyniki
                        const matches = window.allContent
                            .filter(item => {
                                if (!item.title || !item.text) return false;
                                const title = item.title.toLowerCase();
                                const text = item.text.toLowerCase();
                                const q = query.toLowerCase();
                                return title.includes(q) || text.includes(q);
                            })
                            .slice(0, 10);
                        
                        // Jeśli są wyniki, pokaż je
                        if (matches.length > 0) {
                            matches.forEach(match => {
                                const div = document.createElement('div');
                                div.className = 'search-result-item';
                                div.textContent = match.title;
                                div.onclick = function() {
                                    const element = document.getElementById(match.id);
                                    if (element) {
                                        openAccordionsToElement(element);
                                        setTimeout(() => {
                                            element.scrollIntoView({behavior: 'smooth'});
                                        }, 300);
                                        resultsContainer.style.display = 'none';
                                    }
                                };
                                resultsContainer.appendChild(div);
                            });
                            
                            // Upewnij się, że kontener wyników jest widoczny i ma odpowiednie style
                            resultsContainer.style.display = 'block';
                            resultsContainer.style.position = 'absolute';
                            resultsContainer.style.top = '100%';
                            resultsContainer.style.left = '0';
                            resultsContainer.style.width = '100%';
                            resultsContainer.style.zIndex = '9999';
                            resultsContainer.style.background = '#222';
                            resultsContainer.style.color = '#fff';
                            resultsContainer.style.border = '1px solid #ff8533';
                        } else {
                            // Jeśli nie ma wyników, ukryj kontener
                            resultsContainer.style.display = 'none';
                        }
                    }
                });
                
                // Dodaj też obsługę zdarzenia focus
                pcSearchInput.addEventListener('focus', function() {
                    if (this.value.trim().length >= 2) {
                        const resultsContainer = document.getElementById('searchResults');
                        if (resultsContainer) {
                            resultsContainer.style.display = 'block';
                        }
                    }
                });
            }
        }

        // Zastępujemy problematyczną funkcję debugAllContent, która powoduje błąd
        window.debugAllContent = function() {
            console.log("Bezpieczna wersja debugAllContent");
            return; // Nie wykonujemy problematycznego kodu
        };

        // Naprawiamy funkcję showResults
        window.showResults = function(query) {
            const container = document.getElementById('searchResults');
            
            // Wyczyszczenie kontenera
            if (container) {
                container.innerHTML = '';
            } else {
                console.error("Nie znaleziono kontenera #searchResults");
                return;
            }
            
            // Jeśli zapytanie jest puste, ukrywamy wyniki
            if (!query || query.trim().length < 2) {
                container.style.display = 'none';
                return;
            }
            
            // Normalizacja zapytania
            query = query.toLowerCase().trim();
            console.log("Szukam: " + query);
            
            // Znajdujemy dopasowania (bezpieczne przeszukiwanie)
            let matches = [];
            
            if (!window.allContent || !Array.isArray(window.allContent)) {
                console.error("Brak tablicy allContent!");
                return;
            }

            console.log("Przeszukuję allContent, liczba elementów:", window.allContent.length);
            
            for (let i = 0; i < window.allContent.length; i++) {
                const item = window.allContent[i];
                if (!item || !item.id) {
                    console.warn("Pominięto element bez ID:", item);
                    continue;
                }
                
                console.log("Sprawdzam element:", item.id, item.title);
                
                // Sprawdzamy tytuł i treść
                const title = String(item.title || "").toLowerCase();
                const text = String(item.text || "").toLowerCase();
                
                // Bezpieczne sprawdzanie tagów
                let tagsMatch = false;
                if (item.tags) {
                    try {
                        if (typeof item.tags === 'string') {
                            tagsMatch = item.tags.toLowerCase().includes(query);
                            console.log("Sprawdzam tagi (string):", item.tags);
                        } else if (Array.isArray(item.tags)) {
                            tagsMatch = item.tags.some(tag => 
                                String(tag).toLowerCase().includes(query)
                            );
                            console.log("Sprawdzam tagi (array):", item.tags);
                        }
                    } catch (e) {
                        console.warn("Błąd przy przetwarzaniu tagów:", e);
                    }
                }
                
                // Jeśli znaleziono dopasowanie, dodajemy do wyników
                if (title.includes(query) || text.includes(query) || tagsMatch) {
                    console.log("Znaleziono dopasowanie:", item.id, item.title);
                    matches.push({
                        id: item.id,
                        title: item.title || item.id,
                        text: item.text || "",
                        score: (title.includes(query) ? 100 : 0) + 
                               (text.includes(query) ? 50 : 0) + 
                               (tagsMatch ? 75 : 0)
                    });
                }
            }
            
            // Sortujemy i ograniczamy wyniki
            matches = matches.sort((a, b) => b.score - a.score).slice(0, 10);
            console.log("Znalezione dopasowania:", matches);
            
            // Jeśli nie ma dopasowań, ukrywamy kontener
            if (matches.length === 0) {
                container.style.display = 'none';
                return;
            }
            
            // Wyświetlamy wyniki
            matches.forEach(match => {
                const div = document.createElement('div');
                div.className = 'search-result-item';
                div.style.padding = '10px 15px';
                div.style.borderBottom = '1px solid #444';
                div.style.cursor = 'pointer';
                div.style.color = '#fff';
                
                div.innerHTML = `
                    <div class="search-result-title">${match.title}</div>
                    <div class="search-result-preview">${match.text.substring(0, 100)}...</div>
                `;
                
                div.addEventListener('click', function() {
                    console.log("Kliknięto wynik wyszukiwania");
                    
                    // Wyczyść pola wyszukiwania
                    const searchInputs = ['searchInput', 'mobileSearchInput'];
                    searchInputs.forEach(inputId => {
                        const input = document.getElementById(inputId);
                        if (input) {
                            console.log(`Czyszczę pole ${inputId}`);
                            input.value = '';
                            // Wywołaj zdarzenie input, aby wywołać nasłuchiwacze
                            input.dispatchEvent(new Event('input'));
                        } else {
                            console.warn(`Nie znaleziono pola ${inputId}`);
                        }
                    });

                    // Ukryj kontener wyników
                    container.style.display = 'none';
                    container.innerHTML = '';

                    const element = document.getElementById(match.id);
                    if (element) {
                        console.log("Znaleziono element:", element);
                        try {
                            // Znajdź najbliższy akordeon
                            let accordion = null;
                            
                            // Najpierw sprawdź, czy element sam jest akordeonem
                            if (element.classList.contains('accordion')) {
                                accordion = element;
                            } else {
                                // Sprawdź poprzednie elementy rodzeństwa
                                let sibling = element.previousElementSibling;
                                while (sibling) {
                                    if (sibling.classList.contains('accordion')) {
                                        accordion = sibling;
                                        break;
                                    }
                                    sibling = sibling.previousElementSibling;
                                }
                                
                                // Jeśli nie znaleziono, sprawdź rodziców
                                if (!accordion) {
                                    let parent = element.parentElement;
                                    while (parent) {
                                        if (parent.previousElementSibling && parent.previousElementSibling.classList.contains('accordion')) {
                                            accordion = parent.previousElementSibling;
                                            break;
                                        }
                                        parent = parent.parentElement;
                                    }
                                }
                            }
                            
                            if (accordion) {
                                console.log("Znaleziono akordeon:", accordion);
                                openAccordionsToElement(accordion);
                                
                                setTimeout(() => {
                                    element.scrollIntoView({behavior: 'smooth', block: 'center'});
                                }, 300);
                            } else {
                                console.warn("Nie znaleziono akordeonu dla elementu:", match.id);
                            }
                        } catch (e) {
                            console.error("Błąd przy otwieraniu akordeonu:", e);
                        }
                    } else {
                        console.error("Nie znaleziono elementu o ID:", match.id);
                    }
                });
                
                container.appendChild(div);
            });
            
            // Pokazujemy kontener z wynikami
            container.style.display = 'block';
        };

        // Bezpośrednio dołączamy nowe nasłuchiwacze do pól wyszukiwania
        let searchInput2 = document.getElementById('searchInput');
        let mobileSearchInput2 = document.getElementById('mobileSearchInput');

        if (searchInput2) {
            searchInput2.addEventListener('input', function() {
                window.showResults(this.value);
            });
        }

        if (mobileSearchInput2) {
            mobileSearchInput2.addEventListener('input', function() {
                window.showResults(this.value);
            });
        }

        console.log("Funkcje wyszukiwania zostały zastąpione");
        
        function searchText() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const bodyText = document.body.innerHTML;

            // Usuń poprzednie podświetlenia
            document.body.innerHTML = bodyText.replace(/<span class="highlight">(.*?)<\/span>/g, '$1');

            if (input) {
                const regex = new RegExp(input, 'gi');
                document.body.innerHTML = bodyText.replace(regex, (match) => `<span class="highlight">${match}</span>`);
            }
        }
  
        // Usuwamy stare implementacje wyszukiwania i zmienne
        (function() {
            // Funkcja do wyszukiwania
            function wyszukaj(query) {
                const container = document.getElementById('searchResults');
                if (!container) return;
                
                container.innerHTML = '';
                
                if (!query || query.trim().length < 2) {
                    container.style.display = 'none';
                    return;
                }
                
                query = query.toLowerCase().trim();
                console.log("Szukam:", query);
                
                if (!window.allContent || !Array.isArray(window.allContent)) {
                    console.error("Brak tablicy allContent!");
                    return;
                }
                
                const znalezione = [];
                
                for (const item of window.allContent) {
                    if (!item || !item.id) continue;
                    
                    const title = (item.title || "").toString().toLowerCase();
                    const content = (item.content || "").toString().toLowerCase();
                    let tagMatch = false;
                    
                    if (item.tags) {
                        if (typeof item.tags === 'string') {
                            tagMatch = item.tags.toLowerCase().includes(query);
                        } else if (Array.isArray(item.tags)) {
                            tagMatch = item.tags.some(tag => 
                                typeof tag === 'string' && tag.toLowerCase().includes(query)
                            );
                        }
                    }
                    
                    if (title.includes(query) || content.includes(query) || tagMatch) {
                        znalezione.push({
                            id: item.id,
                            title: item.title || item.id,
                            score: (title.includes(query) ? 2 : 0) + 
                                   (content.includes(query) ? 1 : 0) + 
                                   (tagMatch ? 3 : 0)
                        });
                    }
                }
                
                znalezione.sort((a, b) => b.score - a.score);
                console.log("Znaleziono dopasowań:", znalezione.length);
                
                if (znalezione.length > 0) {
                    znalezione.slice(0, 10).forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'search-result-item';
                        div.textContent = item.title;
                        
                        div.addEventListener('click', () => {
                            const element = document.getElementById(item.id);
                            if (element && typeof openAccordionsToElement === 'function') {
                                openAccordionsToElement(element);
                                setTimeout(() => {
                                    element.scrollIntoView({behavior: 'smooth', block: 'center'});
                                    container.style.display = 'none';
                                }, 300);
                            }
                        });
                        
                        container.appendChild(div);
                    });
                    container.style.display = 'block';
                } else {
                    container.style.display = 'none';
                }
            }
            
            // Inicjalizacja wyszukiwania
            function initWyszukiwanie() {
                ['searchInput', 'mobileSearchInput'].forEach(id => {
                    const el = document.getElementById(id);
                    if (el) {
                        const newEl = el.cloneNode(true);
                        el.parentNode.replaceChild(newEl, el);
                        newEl.addEventListener('input', function() {
                            wyszukaj(this.value);
                        });
                    }
                });
            }
            
            // Inicjalizujemy wyszukiwanie
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initWyszukiwanie);
            } else {
                initWyszukiwanie();
            }
            
            window.wyszukaj = wyszukaj;
        })();

        // Dodaj nową funkcję do obsługi kliknięć w główne akordeony
        function setupMainAccordions() {
            const mainAccordions = document.querySelectorAll('.accordion:not(.nested)');
            
            mainAccordions.forEach(accordion => {
                // Usuń stare nasłuchiwacze
                const newAccordion = accordion.cloneNode(true);
                accordion.parentNode.replaceChild(newAccordion, accordion);
                
                newAccordion.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    this.classList.toggle('active');
                    const accordionPanel = this.nextElementSibling;
                    
                    if (accordionPanel.style.maxHeight) {
                        accordionPanel.style.maxHeight = null;
                    } else {
                        // Najpierw ustawiamy auto, aby panel mógł się rozszerzyć
                        accordionPanel.style.maxHeight = 'none';
                        
                        // Pobieramy rzeczywistą wysokość zawartości
                        const contentHeight = accordionPanel.scrollHeight;
                        
                        // Dodajemy margines bezpieczeństwa
                        const finalHeight = contentHeight + 120;
                        
                        // Resetujemy wysokość i ustawiamy nową z animacją
                        accordionPanel.style.maxHeight = '0px';
                        
                        // Dajemy czas na reset
                        setTimeout(() => {
                            accordionPanel.style.maxHeight = finalHeight + 'px';
                        }, 10);
                    }
                });
            });
        }

        // Wywołaj funkcję setupMainAccordions po załadowaniu strony i po każdej zmianie w DOM
        document.addEventListener('DOMContentLoaded', setupMainAccordions);

        // Dodaj obserwator zmian w DOM
        const domObserver = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.addedNodes.length) {
                    setupMainAccordions();
                }
            });
        });

        domObserver.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>